How to use 


.env 파일을 생성 
GOOGLE_API_KEY="YOUR KEY"
LOCAL_MODEL=TheBloke/Llama-2-13B-chat-GGUF
LOCAL_MODEL_NAME=llama-2-13b-chat.Q4_K_M.gguf
LOCAL_DIR=data/models
OPENWEATHER_API_KEY="YOUR KEY"

가상환경에서 실행한다면 

poetry install 
poetry run python3 init.py 
uvicorn main:app --reload --host 0.0.0.0 --port 8000

만약 파이썬 상황이라면 

pip install -r requirements.txt
python3 init.py 
uvicorn main:app --reload --host 0.0.0.0 --port 8000

을 실행하면 확인 할 수 있음.

클래스 다이어그램 
classDiagram
    %% Base agent interface
    class Agent {
        +on_event(input: AgentMessage) AsyncGenerator
        +describe() str
    }

    %% PlanningAgent: interprets user input using ApiModel
    class PlanningAgent {
        +run(input: MCPRequest) MCPResponse
        +use_model(prompt: str) str
    }

    %% ToolSelectorAgent: selects which plugin to use
    class ToolSelectorAgent {
        +select_tool(request: MCPRequest) str
    }

    %% ExecutionAgent: runs the selected plugin
    class ExecutionAgent {
        +execute_tool(tool_name: str, request: MCPRequest) MCPResponse
    }

    %% ToolAgent: e.g., WeatherToolAgent
    class ToolAgent {
        +run_tool(request: MCPRequestMessage) MCPResponseMessage
    }

    %% PluginManager: loads and runs plugins
    class PluginManager {
        +load_plugins()
        +run(tool_name: str, request: MCPRequest) MCPResponse
        +get_plugin_descriptions() List[str]
    }

    %% Plugin: generic plugin interface
    class Plugin {
        +run(request: MCPRequest) MCPResponse
    }

    %% Model: base LLM interface (local)
    class Model {
        +ask(prompt: str) str
    }

    %% ApiModel: API-based LLM (not subclass of Model)
    class ApiModel {
        +ask(prompt: str) str
    }

    %% Router: orchestrates messages between agents
    class Router {
        +on_event(user_input: dict, session_id: str)
        +dispatch(agent_message: AgentMessage)
    }

    class "MCPRequest / MCPResponse" {
        +content: Any
        +metadata: dict
    }

    Agent <|-- PlanningAgent
    Agent <|-- ToolSelectorAgent
    Agent <|-- ExecutionAgent
    Agent <|-- ToolAgent

    PlanningAgent --> ApiModel : uses
    ToolSelectorAgent --> Model : uses
    PlanningAgent --> ToolSelectorAgent : calls
    ToolSelectorAgent --> PluginManager : queries
    ExecutionAgent --> PluginManager : uses
    ExecutionAgent --> ToolAgent : may delegate
    PluginManager --> Plugin : loads
    Agent --> "MCPRequest / MCPResponse" : sends/receives
    Router --> Agent : routes to

시퀀스 다이어 그램 

sequenceDiagram
    participant User
    participant Router
    participant PlanningAgent
    participant ToolSelectorAgent
    participant ExecutionAgent
    participant PluginManager
    participant WeatherTool

    User->>Router: Example: "What's the weather like in Seoul?"
    Router->>PlanningAgent: AgentMessage(user message)
    PlanningAgent->>ToolSelectorAgent: select_tool("weather")
    ToolSelectorAgent->>PluginManager: get_plugin_list()
    ToolSelectorAgent-->>PlanningAgent: selected_tool="weather"
    PlanningAgent->>ExecutionAgent: execute("weather", city="Seoul")
    ExecutionAgent->>PluginManager: run("weather", request)
    PluginManager->>WeatherTool: run_tool(city="Seoul")
    WeatherTool-->>PluginManager: MCPResponse(weather="clear", temp=23)
    PluginManager-->>ExecutionAgent: MCPResponse(...)
    ExecutionAgent-->>Router: AgentMessage(response)
    Router-->>User: "Seoul's weather is clear, 23°C"